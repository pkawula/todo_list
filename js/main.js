"use strict";"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("serviceworker.js").then(function(e){console.log("ServiceWorker registration successful with scope: ",e.scope)},function(e){console.log("ServiceWorker registration failed: ",e)})});var allQuests=[],quests=document.getElementById("quests-container"),addQuest=function(e,t,n,s){var c='<div class="single-quest-container quest-'.concat(n," ").concat(s,'">\n        <span class="checkbox">\n            <input type="checkbox" id="check-').concat(n,'" class="check-quest">\n            <label for="check-').concat(n,'"></label>\n        </span>\n        <h3 class="title" title="Click to see details">').concat(e,'</h3>\n        <div class="delete-quest" title="Delete quest"><span>&times;</span></div>\n        <p class="details">').concat(t,"</p>\n        </div>");quests.innerHTML+=c},get=function(e){return JSON.parse(e)},send=function(e){return JSON.stringify(e)},existQuests=get(localStorage.getItem("quests")),voiceTitle=document.getElementById("voice-title"),voiceContent=document.getElementById("voice-content"),SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,recognitionTitle=new SpeechRecognition,recognitionContent=new SpeechRecognition;recognitionTitle.onresult=function(e){var t=e.resultIndex,n=e.results[t][0].transcript;questTitle.value=n},recognitionContent.onresult=function(e){var t=e.resultIndex,n=e.results[t][0].transcript;questContent.innerText=n},voiceTitle.addEventListener("click",function(){recognitionTitle.start()}),voiceContent.addEventListener("click",function(){recognitionContent.start()});var mainFunctions=function(){document.querySelectorAll(".delete-quest").forEach(function(e){e.addEventListener("click",function(){var s=this;this.parentElement.classList.add("deleted"),setTimeout(function(){s.parentElement.remove();var e=document.querySelectorAll(".single-quest-container");localStorage.clear();for(var t=0;t<e.length;t++){var n={id:t+1,title:e[t].children[1].textContent,content:e[t].children[3].textContent,checked:!1};allQuests.push(n),localStorage.setItem("quests",send(allQuests))}},400)},!1)});var t,e=document.querySelectorAll(".check-quest");e.forEach(function(e){e.addEventListener("click",function(){1==this.checked?function(n){t=setTimeout(function(){function e(e){var t=get(localStorage.getItem("quests"))[e-1].checked,n=r[e-1],s=n.title,c=n.content,o=n.id;if(!1===t){var i={id:o,title:s,content:c,checked:!0};r.splice(a-1,1,i),localStorage.clear(),localStorage.setItem("quests",send(r))}else if(!0===t){var l={id:o,title:s,content:c,checked:!1};r.splice(a-1,1,l),localStorage.clear(),localStorage.setItem("quests",send(r))}}var t=n.id.length,a=n.id.split("-")[1],r=get(localStorage.getItem("quests"));switch(t){case 7:case 8:case 9:case 10:e(a)}n.parentElement.parentElement.classList.add("done"),n.parentElement.parentElement.classList.contains("opened")&&n.parentElement.parentElement.classList.remove("opened")},700)}(this):(window.clearTimeout(t),this.parentElement.parentElement.classList.contains("done")&&this.parentElement.parentElement.classList.remove("done"))})}),document.querySelectorAll(".single-quest-container").forEach(function(e){e.addEventListener("click",function(){this.classList.toggle("opened")})})};if(null==existQuests)mainFunctions();else for(var i=0;i<existQuests.length;i++){var isDoneOrNot=void 0;isDoneOrNot=!0===existQuests[i].checked?"done":"",addQuest(existQuests[i].title,existQuests[i].content,existQuests[i].id,isDoneOrNot),mainFunctions()}var questsNum=document.querySelectorAll(".single-quest-container").length+1,questTitle=document.getElementById("quest-title"),questContent=document.getElementById("quest-content"),btn=document.getElementById("btn"),showMessage=function(e,t){var n=document.querySelector(".message-container"),s=document.createElement("p");s.innerHTML="".concat(t),s.classList.add("message"),n.appendChild(s),setTimeout(function(){s.classList.add("".concat(e))},20),setTimeout(function(){s.classList.remove("".concat(e))},4700),setTimeout(function(){s.remove()},5e3)};btn.addEventListener("click",function(e){e.preventDefault();var t=document.querySelectorAll(".single-quest-container").length+1,n=document.getElementById("quest-title"),s=document.getElementById("quest-content");if(""!=n.value&""!=s.value){addQuest(n.value,s.value,t);var c={id:t,title:n.value,content:s.value,checked:!1},o=get(localStorage.getItem("quests")),i=[];i.push(c);var l=[];null!==o?(l=[].concat(o,i),localStorage.setItem("quests",send(l))):localStorage.setItem("quests",send(i)),showMessage("success","The quest is added!"),n.value="",s.value=""}else showMessage("error","The quest is not added! \n Check the fields!");document.querySelectorAll(".delete-quest").forEach(function(e){e.addEventListener("click",function(){var s=this;this.parentElement.classList.add("deleted"),setTimeout(function(){s.parentElement.remove();var e=document.querySelectorAll(".single-quest-container");localStorage.clear();for(var t=0;t<e.length;t++){var n={id:t+1,title:e[t].children[1].textContent,content:e[t].children[3].textContent,checked:!1};allQuests.push(n),localStorage.setItem("quests",send(allQuests))}},400)},!1)});var a,r=document.querySelectorAll(".check-quest");r.forEach(function(e){e.addEventListener("click",function(){1==this.checked?function(n){a=setTimeout(function(){function e(e){var t=get(localStorage.getItem("quests"))[e-1].checked,n=r[e-1],s=n.title,c=n.content,o=n.id;if(!1===t){var i={id:o,title:s,content:c,checked:!0};r.splice(a-1,1,i),localStorage.clear(),localStorage.setItem("quests",send(r))}else if(!0===t){var l={id:o,title:s,content:c,checked:!1};r.splice(a-1,1,l),localStorage.clear(),localStorage.setItem("quests",send(r))}}var t=n.id.length,a=n.id.split("-")[1],r=get(localStorage.getItem("quests"));switch(t){case 7:case 8:case 9:case 10:e(a)}n.parentElement.parentElement.classList.add("done"),n.parentElement.parentElement.classList.contains("opened")&&n.parentElement.parentElement.classList.remove("opened")},700)}(this):(window.clearTimeout(a),this.parentElement.parentElement.classList.contains("done")&&this.parentElement.parentElement.classList.remove("done"))})}),document.querySelectorAll(".single-quest-container").forEach(function(e){e.addEventListener("click",function(){this.classList.toggle("opened")})})});